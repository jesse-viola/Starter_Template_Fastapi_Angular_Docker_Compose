<!-- 🎯 LEARNING OBJECTIVE: Angular Template Syntax & Material UI Integration -->
<!-- This template demonstrates:
     1. Angular directives (*ngIf, property binding)
     2. Event binding (click, keyup.enter)
     3. Template reference variables
     4. Material UI components and directives
     5. Accessibility best practices -->

<div class="search-bar-container">
  <div class="search-input-wrapper">
    <mat-icon class="search-icon">search</mat-icon>
    <input
      #input
      class="search-input"
      [formControl]="searchControl"
      [placeholder]="placeholder"
      [matAutocomplete]="auto"
      (keyup.enter)="onSubmit()"
      (mouseenter)="onMouseEnter()"
      (mouseleave)="onMouseLeave()"
      (focus)="onFocus()"
      (input)="onInput()"
      type="text"
    />
    
    <!-- ❌ CLEAR BUTTON: Only shows when there's text -->
    @if (searchControl.value) {
      <button class="clear-button" (click)="clearSearch()" type="button" aria-label="Clear search">
        <mat-icon>close</mat-icon>
      </button>
    }
  </div>
  
  <!-- Material Autocomplete Panel -->
  <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onSuggestionSelected($event.option.value)">
    @if (enableSuggestions) {
      @for (suggestion of filteredSuggestions | async; track suggestion.id) {
        <mat-option [value]="suggestion">
          @if (suggestion.icon) {
            <mat-icon class="suggestion-icon">{{ suggestion.icon }}</mat-icon>
          }
          <span class="suggestion-text">{{ suggestion.text }}</span>
          @if (suggestion.category) {
            <span class="suggestion-category">{{ suggestion.category }}</span>
          }
        </mat-option>
      }
    }
  </mat-autocomplete>

  <!-- 🔘 SUBMIT BUTTON: Triggers search action (optional) -->
  @if (showButton) {
    <button
      mat-raised-button
      color="primary"
      (click)="onSubmit()"
      class="search-button"
      type="button"
      [disabled]="isSearchEmpty()"
    >
      <mat-icon>search</mat-icon>
      Search
    </button>
  }
</div>

<!-- 🎁 BONUS CHALLENGES: Add these features yourself! -->
<!-- TODO FOR YOU: Add a loading spinner that shows during search -->
<!-- TODO FOR YOU: Add a dropdown for search filters (All, Users, Posts, etc.) -->
<!-- TODO FOR YOU: Add recent searches display when input is focused and empty -->
